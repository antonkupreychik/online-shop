# Online-Shop Management System

## Описание
Online Shop Management System - это система управления заказами для интернет-магазина, которая позволяет пользователям управлять заказами, клиентами и товарами. Система включает в себя несколько микросервисов, каждый из которых отвечает за свою часть функциональности.

## Основные компоненты
- **Gateway Service**: Маршрутизация запросов и агрегация данных.
- **User Service**: Управление пользователями и их ролями.
  - http://localhost:9001/swagger/swagger-ui/index.html
- **Product Service**: Управление товарами.
  - http://localhost:9002/swagger/swagger-ui/index.html
- **Order Service**: Обработка заказов.
  - http://localhost:9003/swagger/swagger-ui/index.html
- **Notification Service**: Уведомления пользователей.

Чтобы я еще добавил:
- Scheduler Service - для запуска отложенных задач
- Auth Service - для авторизации/аунтефикации пользователей
- **Statistics Service** - для сбора статистики об товарах и покупках пользователей
- Payment Service - для оплаты заказов
- Rates Service - для возможности получения курсов валют для покупки
- Promotions Service - для работы с промокодами/скидками для товаров
- Delivery Service - для работы с доставкой товаров

## Технологии
- Spring Boot
- PostgreSQL/MongoDB
- Kafka
- Redis
- Docker, DockerCompose

### Запуск
```
docker-compose up --build
```

Для построения взаимодействия между этими микросервисами, необходимо определить основные задачи и бизнес-логику каждого сервиса. Это позволит понять, как они будут взаимодействовать друг с другом. Опишем каждый сервис и возможные сценарии взаимодействия между ними.

### 1. Gateway Service
**Задачи:**
- Маршрутизация запросов к соответствующим сервисам.
- Агрегация данных от различных сервисов и предоставление клиентам.

**Взаимодействие:**
- Получает запросы от клиентов и направляет их в соответствующие сервисы.
- Объединяет данные от различных сервисов и возвращает клиентам.

### 2. Auth Service
**Задачи:**
- Авторизация и аутентификация пользователей.
- Управление сессиями и токенами.

**Взаимодействие:**
- Проверяет токены пользователей для доступа к другим сервисам через Gateway.
- Передает информацию о пользователях в Notification Service для отправки уведомлений.

### 3. Order Service
**Задачи:**
- Обработка заказов (создание, обновление, отмена).
- Взаимодействие с Payment Service для оплаты.

**Взаимодействие:**
- При создании заказа взаимодействует с Payment Service для обработки платежа.
- Уведомляет Notification Service о статусе заказа.
- Запрашивает курсы валют у Rates Service при необходимости.

### 4. Payment Service
**Задачи:**
- Обработка платежей.
- Взаимодействие с внешними платежными системами.

**Взаимодействие:**
- Получает запросы на оплату от Order Service.
- Отправляет статус платежа обратно в Order Service.
- Использует Rates Service для получения курсов валют.

### 5. Notification Service
**Задачи:**
- Отправка уведомлений пользователям (email, SMS, push-уведомления).

**Взаимодействие:**
- Получает информацию от Order Service, Auth Service и Promotions Service для отправки уведомлений.
- Уведомляет пользователей о статусе заказа, промоакциях и других событиях.

### 6. Scheduler Service
**Задачи:**
- Запуск отложенных задач.

**Взаимодействие:**
- Планирует и запускает задачи для других сервисов, например, отправку уведомлений через Notification Service или сбор статистики через Statistics Service.

### 7. Statistics Service
**Задачи:**
- Сбор и анализ данных о товарах и покупках пользователей.

**Взаимодействие:**
- Получает данные от Order Service о покупках.
- Анализирует и предоставляет агрегированные данные другим сервисам по запросу.

### 8. Rates Service
**Задачи:**
- Предоставление курсов валют.

**Взаимодействие:**
- Предоставляет курсы валют Order Service и Payment Service.

### 9. Promotions Service
**Задачи:**
- Управление промокодами и скидками.

**Взаимодействие:**
- Получает запросы на проверку и применение промокодов от Order Service.
- Уведомляет Notification Service о доступных промоакциях.

### 10. Delivery Service
**Задачи:**
- Управление доставкой товаров.

**Взаимодействие:**
- Получает запросы на доставку от Order Service.
- Передает статус доставки в Notification Service.

## Сценарий взаимодействия

1. **Пользователь делает заказ:**
  - Gateway Service получает запрос и направляет его в Order Service.
  - Order Service проверяет промокод через Promotions Service и запрашивает курс валют через Rates Service.
  - Order Service отправляет запрос на оплату в Payment Service.
  - Payment Service проверяет и подтверждает оплату.
  - Order Service уведомляет Notification Service об успешном заказе и передает данные в Delivery Service для доставки.
  - Notification Service отправляет пользователю уведомление о статусе заказа.

2. **Пользователь регистрируется:**
  - Gateway Service направляет запрос в Auth Service.
  - Auth Service создает учетную запись и передает информацию в Notification Service для отправки приветственного уведомления.

3. **Сбор статистики:**
  - Scheduler Service планирует периодические задачи для сбора данных о заказах и передает их в Statistics Service.
  - Statistics Service обрабатывает данные и предоставляет отчеты другим сервисам по запросу.

Этот сценарий описывает базовую бизнес-логику и взаимодействие между микросервисами. Подробная реализация будет включать дополнительные детали, такие как обработка ошибок, логирование и мониторинг.


<img width="1303" alt="image" src="https://github.com/antonkupreychik/online-shop/assets/125571097/d354620f-e49f-4744-98de-a98df81c56d0">
